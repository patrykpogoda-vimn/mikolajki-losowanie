import random, json, secrets

participants = [
    "Aga",
    "Patryk",
    "Magda",
    "Jacek",
    "Åukasz K",
    "Åukasz W",
    "MichaÅ‚"
]

givers = participants[:]
receivers = participants[:]

while True:
    random.shuffle(receivers)
    if all(g != r for g, r in zip(givers, receivers)):
        break

# --- GENEROWANIE HASHY ---
pairs = {}
for giver, receiver in zip(givers, receivers):
    h = secrets.token_hex(4)  # 8 znakÃ³w
    pairs[h] = {"giver": giver, "receiver": receiver}

# --- HTML (jedna strona) ---
html = f"""
<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Secret Santa</title>
<style>
body {{ font-family: Arial; padding: 40px; font-size: 22px; }}
.box {{ padding: 20px; border: 2px solid #333; display: inline-block; margin-top:20px; }}
</style>
</head>
<body>
<h1>ğŸ„ Secret Santa ğŸ„</h1>
<div id="result" class="box">ÅadujÄ™ wynik...</div>

<script>
const data = {json.dumps(pairs)};

const hash = window.location.hash.substring(1);
if (!hash || !(hash in data)) {{
    document.getElementById("result").innerHTML = "Niepoprawny lub pusty link!";
}} else {{
    document.getElementById("result").innerHTML =
      "Osoba, ktÃ³rÄ… obdarowujesz: <b>" + data[hash].receiver + "</b> ğŸ";
}}
</script>

</body>
</html>
"""

with open("index.html", "w", encoding="utf-8") as f:
    f.write(html)

print("ğŸ”— Wygenerowane linki:")
print("----------------------")
BASE = "https://patrykpogoda-vimn.github.io/mikolajki-losowanie"

for h, info in pairs.items():
    print(f"{info['giver']}: {BASE}/#{h}")
